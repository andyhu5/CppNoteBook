# Senders/Receivers: An Introduction

https://accu.org/journals/overload/32/184/teodorescu/

这篇文章由Lucian Radu Teodorescu撰写，标题为《Senders/Receivers: An Introduction》，刊登在ACCU的《Overload》期刊（32(184):11-16，2024年12月）。文章详细介绍了C++26即将推出的新并发特性——std::execution，也称为发送者/接收者（senders/receivers），并阐述了其核心概念及使用方法。以下是文章的总结：

主要内容

1. **背景与引入**：
   - 2024年6月，在圣路易斯举行的WG21全体会议上，P2300R10提案（std::execution）被正式采纳，纳入C++26标准。这一特性为C++引入了一种新的并发模型，支持并发、并行和异步编程。
   - 发送者/接收者模型是C++的一项重大补充，旨在提供一种高效、线程安全的编程方式，避免死锁和数据竞争等问题。
2. **发送者/接收者的核心概念**：
   - **发送者（Sender）**：表示一个尚未执行的计算单元，描述将要完成的工作。发送者可以看作是对工作的抽象，类似于函数，允许程序员以结构化的方式表达计算。
   - **接收者（Receiver）**：定义了当发送者的计算完成时如何处理结果。接收者负责接收计算结果或处理错误。
   - 发送者/接收者模型通过组合和嵌套，允许程序员以类似函数调用的方式构建复杂的并发程序，同时保持代码的可读性和可维护性。
3. **结构化并发**：
   - 文章强调发送者/接收者模型支持结构化并发，类似于结构化编程。子发送者必须在父发送者完成前完成，这种层次结构增强了代码的可推理性。
   - 发送者可以隐藏实现细节，提供抽象点，便于程序分解和维护。
4. **优势**：
   - **高效并发**：发送者/接收者模型允许程序充分利用多核处理器，支持高效的并发和并行执行。
   - **线程安全**：通过设计避免了常见的并发问题，如死锁和数据竞争。
   - **可组合性**：发送者可以像函数一样组合，构建复杂的异步工作流，同时保持代码清晰。
5. **实际应用**：
   - 文章提到，Teodorescu在2022年的ACCU会议演讲《Structured Concurrency》中展示了一个示例，说明如何用发送者表示程序的各个部分，甚至整个程序。
   - 发送者/接收者模型的实现已在NVIDIA的stdexec库中有所体现，提供了实践参考。
6. **相关资源**：
   - 文章引用了P2300R10提案、C++标准工作草案、Herb Sutter的圣路易斯会议报告等，提供了进一步学习的入口。
   - 其他相关提案（如P2079R5、P3109R0、P3149R6）也在推动发送者/接收者生态的发展。

总结

发送者/接收者是C++26引入的一项强大并发工具，旨在通过结构化、抽象的方式简化并发编程。它们不仅提高了程序的性能和安全性，还通过可组合性和清晰的层次结构增强了代码的可维护性。Teodorescu的文章为开发者提供了这一特性的入门指南，并强调其在现代C++开发中的重要性。对于希望深入了解的读者，文章推荐了相关标准提案和实现库（如stdexec）作为进一步研究的起点。